# Feature Specification: 번역 히스토리 (Translation History)

**Feature Branch**: `002-translation-history`
**Created**: 2025-12-27
**Status**: Draft
**Input**: User description: "번역 히스토리 기능"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 번역 히스토리 조회 (Priority: P1)

사용자가 과거에 수행한 번역 목록을 확인하여 이전 번역 결과를 빠르게 재사용할 수 있다.

**Why this priority**: 히스토리 기능의 핵심 가치는 과거 번역을 다시 찾아볼 수 있다는 것. 이것이 없으면 기능 자체가 무의미함.

**Independent Test**: 앱에서 여러 번 번역을 수행한 후, 히스토리 목록을 열어 모든 번역이 시간순으로 표시되는지 확인.

**Acceptance Scenarios**:

1. **Given** 사용자가 5개의 번역을 수행했을 때, **When** 히스토리 목록을 열면, **Then** 5개의 번역이 최신순으로 정렬되어 표시된다
2. **Given** 히스토리에 번역 항목이 있을 때, **When** 항목을 클릭하면, **Then** 해당 번역의 원문과 번역문이 메인 화면에 로드된다
3. **Given** 히스토리가 비어있을 때, **When** 히스토리 목록을 열면, **Then** "번역 기록이 없습니다" 안내 메시지가 표시된다

---

### User Story 2 - 히스토리 항목 삭제 (Priority: P2)

사용자가 더 이상 필요 없는 번역 기록을 개별 또는 전체 삭제할 수 있다.

**Why this priority**: 프라이버시 보호와 저장 공간 관리를 위해 필요하지만, 조회 기능 없이는 삭제할 대상이 없음.

**Independent Test**: 히스토리에서 특정 항목을 삭제하고, 목록에서 사라지는지 확인.

**Acceptance Scenarios**:

1. **Given** 히스토리에 항목이 있을 때, **When** 개별 항목의 삭제 버튼을 클릭하면, **Then** 해당 항목만 목록에서 제거된다
2. **Given** 히스토리에 여러 항목이 있을 때, **When** "전체 삭제" 버튼을 클릭하면, **Then** 확인 대화상자가 표시된다
3. **Given** 전체 삭제 확인 대화상자에서, **When** "삭제" 버튼을 클릭하면, **Then** 모든 히스토리가 삭제되고 빈 상태 메시지가 표시된다

---

### User Story 3 - 히스토리 검색 (Priority: P3)

사용자가 많은 번역 기록 중에서 특정 번역을 키워드로 검색할 수 있다.

**Why this priority**: 히스토리가 많아졌을 때 유용하지만, 초기에는 스크롤로도 충분히 찾을 수 있음.

**Independent Test**: 검색창에 키워드를 입력하고, 해당 키워드가 포함된 번역만 필터링되는지 확인.

**Acceptance Scenarios**:

1. **Given** 히스토리에 "안녕하세요"가 포함된 번역이 있을 때, **When** "안녕"을 검색하면, **Then** 해당 번역이 결과에 표시된다
2. **Given** 검색어와 일치하는 항목이 없을 때, **When** 검색을 수행하면, **Then** "검색 결과가 없습니다" 메시지가 표시된다
3. **Given** 검색 결과가 표시된 상태에서, **When** 검색어를 지우면, **Then** 전체 히스토리 목록이 다시 표시된다

---

### User Story 4 - 히스토리 항목 복사 (Priority: P3)

사용자가 히스토리에서 번역 결과를 빠르게 클립보드에 복사할 수 있다.

**Why this priority**: 편의 기능으로, 항목을 메인 화면에 로드한 후 복사해도 되므로 우선순위가 낮음.

**Independent Test**: 히스토리 항목의 복사 버튼을 클릭하고, 클립보드에 번역 결과가 복사되는지 확인.

**Acceptance Scenarios**:

1. **Given** 히스토리에 항목이 있을 때, **When** 항목의 복사 버튼을 클릭하면, **Then** 번역 결과가 클립보드에 복사되고 "복사됨" 알림이 표시된다

---

### Edge Cases

- 앱 재시작 후에도 히스토리가 유지되는가?
- 히스토리가 최대 저장 개수(50개)에 도달했을 때 새 번역을 수행하면 어떻게 되는가? (가장 오래된 항목 자동 삭제)
- 동일한 원문으로 다시 번역하면 기존 항목을 업데이트하는가, 새 항목을 추가하는가? (새 항목 추가)
- 매우 긴 텍스트(2000자)가 히스토리 목록에서 어떻게 표시되는가? (처음 100자만 미리보기로 표시)

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 시스템은 번역 완료 시 자동으로 히스토리에 저장해야 한다
- **FR-002**: 시스템은 각 히스토리 항목에 원문, 번역문, 소스 언어, 타겟 언어, 번역 시간을 저장해야 한다
- **FR-003**: 시스템은 최대 50개의 히스토리 항목을 저장해야 한다
- **FR-004**: 시스템은 50개 초과 시 가장 오래된 항목을 자동 삭제해야 한다
- **FR-005**: 사용자는 히스토리 목록을 최신순으로 조회할 수 있어야 한다
- **FR-006**: 사용자는 히스토리 항목을 클릭하여 메인 화면에 로드할 수 있어야 한다
- **FR-007**: 사용자는 개별 히스토리 항목을 삭제할 수 있어야 한다
- **FR-008**: 사용자는 전체 히스토리를 한 번에 삭제할 수 있어야 한다
- **FR-009**: 시스템은 전체 삭제 전 확인 대화상자를 표시해야 한다
- **FR-010**: 사용자는 키워드로 히스토리를 검색할 수 있어야 한다 (원문 및 번역문 모두 대상)
- **FR-011**: 사용자는 히스토리 항목의 번역 결과를 클립보드에 복사할 수 있어야 한다
- **FR-012**: 시스템은 앱 종료 후에도 히스토리를 영구 저장해야 한다
- **FR-013**: 히스토리 목록에서 긴 텍스트는 처음 100자만 미리보기로 표시해야 한다
- **FR-014**: 사용자는 툴바의 히스토리 버튼 또는 단축키(Cmd+H)로 히스토리 패널을 토글할 수 있어야 한다

### Key Entities

- **HistoryEntry**: 개별 번역 기록 항목
  - 고유 식별자
  - 원문 텍스트
  - 번역된 텍스트
  - 소스 언어 코드
  - 타겟 언어 코드
  - 번역 수행 시간

- **HistoryStore**: 히스토리 저장소
  - 최대 50개 항목 관리
  - 영구 저장 및 로드
  - 검색 기능 제공

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 사용자가 히스토리에서 원하는 번역을 3초 이내에 찾아 로드할 수 있다
- **SC-002**: 히스토리 목록이 1초 이내에 로드되어 표시된다
- **SC-003**: 앱 재시작 후 모든 히스토리 항목이 100% 복원된다
- **SC-004**: 검색 결과가 입력 후 0.5초 이내에 표시된다
- **SC-005**: 히스토리 기능으로 인해 앱 시작 시간이 0.5초 이상 증가하지 않는다

## Assumptions

- 히스토리는 로컬 저장소에만 저장되며, 클라우드 동기화는 지원하지 않는다
- 50개 항목 제한은 일반적인 사용자의 최근 번역 필요를 충족한다고 가정한다
- 동일한 원문을 다시 번역해도 별도의 히스토리 항목으로 저장한다 (번역 결과가 다를 수 있음)
- 히스토리 UI는 메인 윈도우 오른쪽에 토글 가능한 사이드 패널로 구현한다

## Clarifications

### Session 2025-12-27

- Q: 히스토리 UI 배치 방식? → A: 사이드 패널 (메인 윈도우 오른쪽에 토글 가능한 패널)
- Q: 히스토리 패널 토글 방식? → A: 버튼 + 단축키 모두 제공 (툴바 버튼 및 Cmd+H)
